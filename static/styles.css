* { box-sizing: border-box; }
body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: #0b0b0c; color: #f7f7f7; }
.topbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; background: #121214; border-bottom: 1px solid #222; position: sticky; top: 0; z-index: 10;}
.topbar .title { font-weight: 600; letter-spacing: 0.2px; }
.topbar .actions button, .topbar .actions select, .topbar .actions input { margin-left: 8px; }

.controls { display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; border-bottom: 1px solid #222; }
.controls .left > * { margin-right: 12px; }
.controls input, .controls select, button { background: #1a1a1c; color: #f7f7f7; border: 1px solid #2a2a2e; padding: 6px 8px; border-radius: 8px; }
button.primary { background: #ff6a00; border-color: #ff6a00; color: #111; font-weight: 600; }

.grid { padding: 12px; display: grid; grid-template-columns: repeat(auto-fill, minmax(112px, 1fr)); gap: 10px; }
.tile { position: relative; border: 1px solid #2a2a2e; border-radius: 10px; overflow: hidden; background: #121214; cursor: pointer; }
.tile .thumb { width: 100%; height: auto; display: block; image-rendering: pixelated; }
.tile .meta { padding: 6px 8px; font-size: 12px; line-height: 1.2; color: #c9c9cf; word-break: break-all; }
.tile .badge { position: absolute; top: 6px; right: 6px; padding: 2px 6px; font-size: 10px; background: #2c2c30; border-radius: 999px; }
.tile .annotate { position: absolute; left: 6px; top: 6px; background: #2c2c30; padding: 2px 6px; border-radius: 999px; font-size: 12px; text-decoration: none; color: #ddd;}
.tile.selected { outline: 3px solid #ff6a00; }
.foot { padding: 10px 14px; color: #9b9ba3; border-top: 1px solid #222; }

.annotate-wrap { display: grid; grid-template-columns: auto 260px; gap: 12px; padding: 12px; }
.canvas-wrap { position: relative; width: fit-content; border: 1px solid #2a2a2e; border-radius: 10px; overflow: hidden; }
#canvas { position: absolute; left: 0; top: 0; }
.box-list { border: 1px solid #2a2ae; border-radius: 10px; padding: 8px; background: #121214; }
.box-list .hdr { font-weight: 600; margin-bottom: 6px; }
.box-list ul { list-style: none; padding: 0; margin: 0; max-height: calc(100vh - 220px); overflow: auto; }
.box-list li { padding: 6px; border: 1px dashed #333; border-radius: 6px; margin-bottom: 6px; font-size: 12px; display: flex; justify-content: space-between; align-items: center; }
.box-list li.active { background: #1f1f22; border-color: #ff6a00; }
.box-list .hint { margin-top: 8px; font-size: 12px; color: #aaa; }

.tile canvas.overlay { position:absolute; left:0; top:0; pointer-events:none; }
